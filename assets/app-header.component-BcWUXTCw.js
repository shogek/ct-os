import{r as o,u as D,g as R,j as r,c as I,D as E,I as _,o as L,a as h}from"./index-3nXYM0Nf.js";function M(e){const[s,l]=o.useState(null),[f,m]=o.useState({top:0,left:0}),u=n=>{document.addEventListener("mouseup",v),l({top:n.clientY,left:n.clientX})},v=()=>{document.removeEventListener("mouseup",v),l(null)},i=o.useCallback(n=>{if(!s)return;const z=n.clientX-s.left,p=n.clientY-s.top;l({top:n.clientY,left:n.clientX}),m(d=>({top:d.top+p,left:d.left+z}))},[s]);return o.useEffect(()=>{if(e.elToDrag.current)return e.elToDrag.current.addEventListener("mousedown",u),()=>{var n;(n=e.elToDrag.current)==null||n.removeEventListener("mousedown",u)}},[e.elToDrag]),o.useEffect(()=>{if(!s){document.removeEventListener("mousemove",i);return}return document.addEventListener("mousemove",i),()=>{document.removeEventListener("mousemove",i)}},[i,s]),{verticalDragInPx:f.top,horizontalDragInPx:f.left}}function y(e){const[s,l]=o.useState(!1),[f,m]=o.useState(!1),[u,v]=o.useState({horizontally:0,vertically:0}),i=o.useRef({clientX:0,clientY:0}),n=t=>{!e.elToResize.current||!t.target||!(t.target instanceof Element)||(t.target.contains(e.elToResize.current)?(l(!0),i.current={clientX:t.clientX,clientY:t.clientY}):l(!1))},z=t=>{!t.target||!(t.target instanceof Element)||(t.target.contains(e.elToResize.current)?m(!0):m(!1))},p=t=>{const x=t.clientX-i.current.clientX,g=t.clientY-i.current.clientY;v(c=>({horizontally:c.horizontally+x,vertically:c.vertically+g})),i.current={clientX:t.clientX,clientY:t.clientY}},d=()=>{l(!1)};return o.useEffect(()=>{if(!s){document.removeEventListener("mouseup",d),document.removeEventListener("mousemove",p);return}return document.addEventListener("mouseup",d),document.addEventListener("mousemove",p),()=>{document.removeEventListener("mouseup",d),document.removeEventListener("mousemove",p)}},[s]),o.useEffect(()=>{if(e.elToResize.current)return e.elToResize.current.addEventListener("mousedown",n),e.elToResize.current.addEventListener("mouseover",z),()=>{var t,x;(t=e.elToResize.current)==null||t.removeEventListener("mousedown",n),(x=e.elToResize.current)==null||x.removeEventListener("mouseover",z)}},[e.elToResize]),{canResize:f,verticalResizeInPx:u.vertically,horizontalResizeInPx:u.horizontally}}const A="_appHeader_1lt1m_1",T="__resized_1lt1m_10",C="_header_1lt1m_13",b="__focused_1lt1m_16",k="_title_1lt1m_19",N="_button_1lt1m_27",P="_icon_1lt1m_36",a={appHeader:A,_resized:T,header:C,_focused:b,title:k,button:N,icon:P};function j(e){const s=D(L),[l]=o.useState(R(10,100)),[f]=o.useState(R(100,800)),m=o.useRef(null),u=o.useRef(null),{horizontalDragInPx:v,verticalDragInPx:i}=M({elToDrag:u}),{canResize:n,horizontalResizeInPx:z,verticalResizeInPx:p}=y({elToResize:m}),d=()=>{s(c=>h.focus({openApps:c,appId:e.openApp.id}))},t=()=>{s(c=>h.close({openApps:c,appId:e.openApp.id}))},x=()=>{s(c=>e.openApp.isMaximized?h.unMaximize({openApps:c,appId:e.openApp.id}):h.maximize({openApps:c,appId:e.openApp.id}))},g=()=>{s(c=>h.minimize({openApps:c,appId:e.openApp.id}))};return r.jsxs("div",{style:{minWidth:"250px",minHeight:"300px",width:e.openApp.isMaximized?"100%":250+z+"px",height:e.openApp.isMaximized?"100%":300+p+"px",display:e.openApp.isMinimized?"none":"flex",top:e.openApp.isMaximized?0:l+i,left:e.openApp.isMaximized?0:f+v,zIndex:e.openApp.zIndex,backgroundColor:"#000"},ref:m,className:I(a.appHeader,{[a._resized]:n,[a._focused]:e.openApp.isFocused}),onMouseDown:d,children:[r.jsxs("div",{className:a.header,ref:u,children:[r.jsx("span",{className:a.title,children:e.openApp.name}),r.jsx("button",{type:"button",className:a.button,onClick:g,children:r.jsx(E,{type:_.UNDERSCORE,iconProps:{className:a.icon}})}),r.jsx("button",{type:"button",className:a.button,onClick:x,children:r.jsx(E,{type:_.WINDOWS,iconProps:{className:a.icon}})}),r.jsx("button",{type:"button",className:a.button,onClick:t,children:r.jsx(E,{type:_.CLOSE,iconProps:{className:a.icon}})})]}),e.children]})}export{j as A};
